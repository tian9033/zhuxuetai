---
import Navigation from '../components/Navigation.astro';
import Sidebar from '../components/Sidebar.astro';
import { getCollection } from 'astro:content';

// 模拟资源数据（实际项目中会从 content 目录加载）
const resources = [
  {
    id: '1',
    title: '八上 Unit 1 核心词汇',
    grade: '八年级',
    category: 'anki',
    downloadUrl: 'https://github.com/yourname/zhuxuetai/releases/download/v1.0/vocab-unit1.apkg',
    usage: '1. 下载后导入 Anki\n2. 每天复习 10-15 分钟\n3. 完成单元学习后进行综合测试'
  },
  {
    id: '2',
    title: '九上 数学 二次函数',
    grade: '九年级',
    category: 'anki',
    downloadUrl: 'https://github.com/yourname/zhuxuetai/releases/download/v1.0/quadratic-function.apkg',
    usage: '1. 下载后导入 Anki\n2. 结合课本例题使用\n3. 定期复习错题'
  },
  {
    id: '3',
    title: '2025 中考数学真题',
    grade: '九年级',
    category: 'exam',
    downloadUrl: 'https://github.com/yourname/zhuxuetai/releases/download/v1.0/2025-math-exam.pdf',
    usage: '1. 打印或在平板上使用\n2. 模拟考试环境完成\n3. 使用错题管理系统分析错误'
  },
  {
    id: '4',
    title: '2024 中考英语真题',
    grade: '九年级',
    category: 'exam',
    downloadUrl: 'https://github.com/yourname/zhuxuetai/releases/download/v1.0/2024-english-exam.pdf',
    usage: '1. 打印或在平板上使用\n2. 模拟考试环境完成\n3. 重点分析听力和阅读部分'
  },
  {
    id: '5',
    title: '错题管理模板',
    grade: '7-9年级',
    category: 'error',
    downloadUrl: 'https://github.com/yourname/zhuxuetai/releases/download/v1.0/error-template.xlsx',
    usage: '1. 下载后打开 Excel\n2. 按照模板填写错题信息\n3. 定期复习和统计分析'
  },
  {
    id: '6',
    title: '错题分析工具',
    grade: '7-9年级',
    category: 'error',
    downloadUrl: 'https://github.com/yourname/zhuxuetai/releases/download/v1.0/error-analyzer.pdf',
    usage: '1. 下载后阅读使用指南\n2. 结合错题模板使用\n3. 构建个人知识漏洞地图'
  }
];

// 按分类分组
const groupedResources = resources.reduce((groups, resource) => {
  const category = resource.category;
  if (!groups[category]) {
    groups[category] = [];
  }
  groups[category].push(resource);
  return groups;
}, {});

// 分类名称映射
const categoryNames = {
  anki: '初中学科Anki牌组',
  exam: '近五年中考真题库',
  error: '错题管理系统'
};
---

<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>资源下载 - 筑学台</title>
    <style>
        /* 响应式布局 */
        @media (max-width: 768px) {
            .sidebar {
                display: none;
            }
        }
    </style>
</head>
<body class="bg-base-100 text-neutral">
    <Navigation />
    
    <div class="flex">
        <!-- 侧边栏 -->
        <div class="sidebar hidden md:block">
            <Sidebar />
        </div>
        
        <!-- 主内容区 -->
        <main class="flex-1">
            <!-- 页面标题 -->
            <section class="py-10 sm:py-12 px-4 md:px-8 bg-gradient-to-b from-blue-50 to-white">
                <div class="max-w-4xl mx-auto">
                    <h1 class="text-2xl sm:text-3xl font-bold mb-4 text-primary">资源下载</h1>
                    <p class="text-gray-600 text-sm sm:text-base">
                        筑学台为您提供系统化的学习资源，助力家庭科学备考。
                        所有资源均基于认知科学原理设计，帮助学生高效学习。
                    </p>
                </div>
            </section>

            <!-- 资源列表 -->
            <section class="py-10 sm:py-12 px-4 md:px-8">
                <div class="max-w-6xl mx-auto">
                    <!-- Anki 牌组 -->
                    <div class="mb-10 sm:mb-12">
                        <h2 class="text-xl sm:text-2xl font-bold mb-5 sm:mb-6 text-primary flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 sm:w-6 h-5 sm:h-6 mr-2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0 0V9" />
                            </svg>
                            初中学科Anki牌组
                        </h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-5 sm:gap-6">
                            {groupedResources.anki?.map(resource => (
                                <div key={resource.id} class="card card-bordered p-5 sm:p-6">
                                    <h3 class="text-base sm:text-lg font-semibold mb-2">{resource.title}</h3>
                                    <p class="text-gray-600 mb-4 text-sm sm:text-base">适用年级：{resource.grade}</p>
                                    <div class="flex flex-col sm:flex-row gap-3 sm:justify-between sm:items-center">
                                        <a href={resource.downloadUrl} class="btn btn-primary text-white py-2 px-5 sm:px-6 rounded-lg font-medium text-center">
                                            下载
                                        </a>
                                        <!-- 折叠面板 -->
                                        <details class="dropdown w-full sm:w-auto">
                                            <summary class="text-sm text-gray-600 cursor-pointer">
                                                如何使用？
                                            </summary>
                                            <div class="p-3 sm:p-4 bg-gray-50 rounded-lg mt-2">
                                                <pre class="text-sm whitespace-pre-wrap">{resource.usage}</pre>
                                            </div>
                                        </details>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    <!-- 中考真题库 -->
                    <div class="mb-10 sm:mb-12">
                        <h2 class="text-xl sm:text-2xl font-bold mb-5 sm:mb-6 text-primary flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 sm:w-6 h-5 sm:h-6 mr-2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            近五年中考真题库
                        </h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-5 sm:gap-6">
                            {groupedResources.exam?.map(resource => (
                                <div key={resource.id} class="card card-bordered p-5 sm:p-6">
                                    <h3 class="text-base sm:text-lg font-semibold mb-2">{resource.title}</h3>
                                    <p class="text-gray-600 mb-4 text-sm sm:text-base">适用年级：{resource.grade}</p>
                                    <div class="flex flex-col sm:flex-row gap-3 sm:justify-between sm:items-center">
                                        <a href={resource.downloadUrl} class="btn btn-primary text-white py-2 px-5 sm:px-6 rounded-lg font-medium text-center">
                                            下载
                                        </a>
                                        <!-- 折叠面板 -->
                                        <details class="dropdown w-full sm:w-auto">
                                            <summary class="text-sm text-gray-600 cursor-pointer">
                                                如何使用？
                                            </summary>
                                            <div class="p-3 sm:p-4 bg-gray-50 rounded-lg mt-2">
                                                <pre class="text-sm whitespace-pre-wrap">{resource.usage}</pre>
                                            </div>
                                        </details>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    <!-- 错题管理系统 -->
                    <div class="mb-10 sm:mb-12">
                        <h2 class="text-xl sm:text-2xl font-bold mb-5 sm:mb-6 text-primary flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 sm:w-6 h-5 sm:h-6 mr-2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z" />
                            </svg>
                            错题管理系统
                        </h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-5 sm:gap-6">
                            {groupedResources.error?.map(resource => (
                                <div key={resource.id} class="card card-bordered p-5 sm:p-6">
                                    <h3 class="text-base sm:text-lg font-semibold mb-2">{resource.title}</h3>
                                    <p class="text-gray-600 mb-4 text-sm sm:text-base">适用年级：{resource.grade}</p>
                                    <div class="flex flex-col sm:flex-row gap-3 sm:justify-between sm:items-center">
                                        <a href={resource.downloadUrl} class="btn btn-primary text-white py-2 px-5 sm:px-6 rounded-lg font-medium text-center">
                                            下载
                                        </a>
                                        <!-- 折叠面板 -->
                                        <details class="dropdown w-full sm:w-auto">
                                            <summary class="text-sm text-gray-600 cursor-pointer">
                                                如何使用？
                                            </summary>
                                            <div class="p-3 sm:p-4 bg-gray-50 rounded-lg mt-2">
                                                <pre class="text-sm whitespace-pre-wrap">{resource.usage}</pre>
                                            </div>
                                        </details>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            </section>

            <!-- 底部信息 -->
            <footer class="bg-gray-50 py-10 px-4 border-t">
                <div class="max-w-6xl mx-auto text-center">
                    <p class="text-gray-600">© 2026 筑学台 | 以科学逻辑守护家庭成长</p>
                </div>
            </footer>
        </main>
    </div>
</body>
</html>
